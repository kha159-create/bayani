import React, { useState, useEffect } from 'react';

interface AzkarCardProps {
    darkMode?: boolean;
}

const AzkarCard: React.FC<AzkarCardProps> = ({ darkMode = false }) => {
    const [currentTime, setCurrentTime] = useState(new Date());
    const [currentZikr, setCurrentZikr] = useState(0);

    // Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©
    const morningAzkar = [
        "Ø£ØµØ¨Ø­Ù†Ø§ ÙˆØ£ØµØ¨Ø­ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡ØŒ ÙˆØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ±",
        "Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ØŒ ÙˆØ¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ØŒ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ØŒ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØªØŒ ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù†Ø´ÙˆØ±",
        "Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø±Ø¨ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ Ø®Ù„Ù‚ØªÙ†ÙŠ ÙˆØ£Ù†Ø§ Ø¹Ø¨Ø¯ÙƒØŒ ÙˆØ£Ù†Ø§ Ø¹Ù„Ù‰ Ø¹Ù‡Ø¯Ùƒ ÙˆÙˆØ¹Ø¯Ùƒ Ù…Ø§ Ø§Ø³ØªØ·Ø¹ØªØŒ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù…Ø§ ØµÙ†Ø¹ØªØŒ Ø£Ø¨ÙˆØ¡ Ù„Ùƒ Ø¨Ù†Ø¹Ù…ØªÙƒ Ø¹Ù„ÙŠ ÙˆØ£Ø¨ÙˆØ¡ Ø¨Ø°Ù†Ø¨ÙŠ ÙØ§ØºÙØ± Ù„ÙŠ ÙØ¥Ù†Ù‡ Ù„Ø§ ÙŠØºÙØ± Ø§Ù„Ø°Ù†ÙˆØ¨ Ø¥Ù„Ø§ Ø£Ù†Øª",
        "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£ØµØ¨Ø­Øª Ø£Ø´Ù‡Ø¯Ùƒ ÙˆØ£Ø´Ù‡Ø¯ Ø­Ù…Ù„Ø© Ø¹Ø±Ø´Ùƒ ÙˆÙ…Ù„Ø§Ø¦ÙƒØªÙƒ ÙˆØ¬Ù…ÙŠØ¹ Ø®Ù„Ù‚Ùƒ Ø£Ù†Ùƒ Ø£Ù†Øª Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª ÙˆØ­Ø¯Ùƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø¹Ø¨Ø¯Ùƒ ÙˆØ±Ø³ÙˆÙ„Ùƒ",
        "Ø§Ù„Ù„Ù‡Ù… Ù…Ø§ Ø£ØµØ¨Ø­ Ø¨ÙŠ Ù…Ù† Ù†Ø¹Ù…Ø© Ø£Ùˆ Ø¨Ø£Ø­Ø¯ Ù…Ù† Ø®Ù„Ù‚Ùƒ ÙÙ…Ù†Ùƒ ÙˆØ­Ø¯Ùƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„ÙƒØŒ ÙÙ„Ùƒ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ„Ùƒ Ø§Ù„Ø´ÙƒØ±"
    ];

    // Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©
    const eveningAzkar = [
        "Ø£Ù…Ø³ÙŠÙ†Ø§ ÙˆØ£Ù…Ø³Ù‰ Ø§Ù„Ù…Ù„Ùƒ Ù„Ù„Ù‡ØŒ ÙˆØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ±",
        "Ø§Ù„Ù„Ù‡Ù… Ø¨Ùƒ Ø£Ù…Ø³ÙŠÙ†Ø§ØŒ ÙˆØ¨Ùƒ Ø£ØµØ¨Ø­Ù†Ø§ØŒ ÙˆØ¨Ùƒ Ù†Ø­ÙŠØ§ØŒ ÙˆØ¨Ùƒ Ù†Ù…ÙˆØªØŒ ÙˆØ¥Ù„ÙŠÙƒ Ø§Ù„Ù…ØµÙŠØ±",
        "Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø±Ø¨ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ Ø®Ù„Ù‚ØªÙ†ÙŠ ÙˆØ£Ù†Ø§ Ø¹Ø¨Ø¯ÙƒØŒ ÙˆØ£Ù†Ø§ Ø¹Ù„Ù‰ Ø¹Ù‡Ø¯Ùƒ ÙˆÙˆØ¹Ø¯Ùƒ Ù…Ø§ Ø§Ø³ØªØ·Ø¹ØªØŒ Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø± Ù…Ø§ ØµÙ†Ø¹ØªØŒ Ø£Ø¨ÙˆØ¡ Ù„Ùƒ Ø¨Ù†Ø¹Ù…ØªÙƒ Ø¹Ù„ÙŠ ÙˆØ£Ø¨ÙˆØ¡ Ø¨Ø°Ù†Ø¨ÙŠ ÙØ§ØºÙØ± Ù„ÙŠ ÙØ¥Ù†Ù‡ Ù„Ø§ ÙŠØºÙØ± Ø§Ù„Ø°Ù†ÙˆØ¨ Ø¥Ù„Ø§ Ø£Ù†Øª",
        "Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ù…Ø³ÙŠØª Ø£Ø´Ù‡Ø¯Ùƒ ÙˆØ£Ø´Ù‡Ø¯ Ø­Ù…Ù„Ø© Ø¹Ø±Ø´Ùƒ ÙˆÙ…Ù„Ø§Ø¦ÙƒØªÙƒ ÙˆØ¬Ù…ÙŠØ¹ Ø®Ù„Ù‚Ùƒ Ø£Ù†Ùƒ Ø£Ù†Øª Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª ÙˆØ­Ø¯Ùƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ùƒ ÙˆØ£Ù† Ù…Ø­Ù…Ø¯Ø§Ù‹ Ø¹Ø¨Ø¯Ùƒ ÙˆØ±Ø³ÙˆÙ„Ùƒ",
        "Ø§Ù„Ù„Ù‡Ù… Ù…Ø§ Ø£Ù…Ø³Ù‰ Ø¨ÙŠ Ù…Ù† Ù†Ø¹Ù…Ø© Ø£Ùˆ Ø¨Ø£Ø­Ø¯ Ù…Ù† Ø®Ù„Ù‚Ùƒ ÙÙ…Ù†Ùƒ ÙˆØ­Ø¯Ùƒ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„ÙƒØŒ ÙÙ„Ùƒ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ„Ùƒ Ø§Ù„Ø´ÙƒØ±"
    ];

    useEffect(() => {
        const timer = setInterval(() => {
            setCurrentTime(new Date());
        }, 1000);

        return () => clearInterval(timer);
    }, []);

    useEffect(() => {
        const interval = setInterval(() => {
            setCurrentZikr(prev => (prev + 1) % getCurrentAzkar().length);
        }, 10000); // ØªØºÙŠÙŠØ± Ø§Ù„Ø°ÙƒØ± ÙƒÙ„ 10 Ø«ÙˆØ§Ù†

        return () => clearInterval(interval);
    }, []);

    const getCurrentAzkar = () => {
        const hour = currentTime.getHours();
        return hour >= 5 && hour < 18 ? morningAzkar : eveningAzkar;
    };

    const getGreeting = () => {
        const hour = currentTime.getHours();
        if (hour >= 5 && hour < 12) return "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±";
        if (hour >= 12 && hour < 18) return "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±";
        return "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±";
    };

    const getTimeOfDay = () => {
        const hour = currentTime.getHours();
        if (hour >= 5 && hour < 12) return "Ø§Ù„ØµØ¨Ø§Ø­";
        if (hour >= 12 && hour < 18) return "Ø§Ù„Ø¸Ù‡Ø±";
        return "Ø§Ù„Ù…Ø³Ø§Ø¡";
    };

    const currentAzkar = getCurrentAzkar();

    return (
        <div className="bg-gradient-to-br from-slate-800/50 to-blue-900/50 backdrop-blur-lg border border-blue-400/20 rounded-2xl p-6 shadow-xl">
            <div className="flex items-center gap-3 mb-4">
                <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-400/20 to-blue-500/20 flex items-center justify-center">
                    <span className="text-2xl">ðŸŒ…</span>
                </div>
                <div>
                    <h3 className="text-xl font-bold text-white">Ø£Ø°ÙƒØ§Ø± {getTimeOfDay()}</h3>
                    <p className="text-blue-200 text-sm">{getGreeting()}ØŒ {currentTime.toLocaleTimeString('ar-SA')}</p>
                </div>
            </div>
            
            <div className="bg-gradient-to-r from-slate-700/50 to-blue-800/50 rounded-xl p-4 border border-blue-400/10">
                <p className="text-white text-sm leading-relaxed text-right">
                    {currentAzkar[currentZikr]}
                </p>
            </div>
            
            <div className="flex justify-between items-center mt-4">
                <div className="flex gap-1">
                    {currentAzkar.map((_, index) => (
                        <div 
                            key={index} 
                            className={`w-2 h-2 rounded-full ${
                                index === currentZikr ? 'bg-cyan-400' : 'bg-slate-600'
                            }`}
                        />
                    ))}
                </div>
                <p className="text-blue-300 text-xs">
                    {currentZikr + 1} Ù…Ù† {currentAzkar.length}
                </p>
            </div>
        </div>
    );
};

export default AzkarCard;

